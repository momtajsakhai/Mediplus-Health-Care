<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Dues - Medical Service Management System</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
            <img src="logo.png" class="me-2" style="width:2em;height:1em;">
            Mediplus Health Care
        </a>
    </div>
</nav>

<div class="container-fluid">
<div class="row">

<!-- SIDEBAR -->
<div class="col-md-2 sidebar">
    <nav class="nav flex-column">
        <a class="nav-link" href="index.html"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a>
        <a class="nav-link" href="agents.html"><i class="bi bi-person-badge me-2"></i>Agents</a>
        <a class="nav-link" href="doctors.html"><i class="bi bi-heart-pulse me-2"></i>Doctors</a>
        <a class="nav-link" href="patients.html"><i class="bi bi-people me-2"></i>Patients</a>
        <a class="nav-link" href="account.html"><i class="bi bi-file-medical me-2"></i>Services Account</a>
        <a class="nav-link" href="invoices.html"><i class="bi bi-receipt me-2"></i>Invoices</a>
        <a class="nav-link" href="billing.html"><i class="bi bi-calculator me-2"></i>Billing</a>
        <a class="nav-link active" href="patientDues.html"><i class="bi bi-exclamation-circle me-2"></i>Patient Dues</a>
        <a class="nav-link" href="report.html"><i class="bi bi-file-earmark-text me-2"></i>Report</a>
        <a class="nav-link" href="doctorRevisit.html"><i class="bi bi-calendar-check me-2"></i>Doctor Revisit</a>
    </nav>
</div>

<!-- MAIN CONTENT -->
<div class="col-md-10 p-4">

<h4 class="mb-3">Patient Dues Details</h4>

<!-- SEARCH -->
<div class="row mb-3">
    <div class="col-md-4">
        <input type="text" id="searchInput" class="form-control" placeholder="Search patient name / ID">
    </div>
</div>

<!-- DUES TABLE -->
<div class="table-responsive">
<table class="table table-bordered table-striped align-middle">
    <thead class="table-light">
        <tr>
            <th>Patient ID</th>
            <th>Patient Name</th>
            <th>Bill No</th>
            <th>Total Amount (₹)</th>
            <th>Paid Amount (₹)</th>
            <th>Due Amount (₹)</th>
            <th>Last Payment Date</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody id="duesTableBody"></tbody>
</table>
</div>

</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const duesData = [
    {
        patientId: "18541-24-25",
        name: "KABITA KHATUN",
        billNo: "BILL-101",
        total: 2500,
        paid: 1500,
        lastPaid: "2025-01-05"
    },
    {
        patientId: "18542-24-25",
        name: "RAHUL SHARMA",
        billNo: "BILL-102",
        total: 1800,
        paid: 1800,
        lastPaid: "2025-01-10"
    },
    {
        patientId: "18543-24-25",
        name: "NEHA SINGH",
        billNo: "BILL-103",
        total: 3200,
        paid: 1000,
        lastPaid: "2025-01-02"
    }
];

const tbody = document.getElementById("duesTableBody");
const searchInput = document.getElementById("searchInput");

function renderTable(data) {
    tbody.innerHTML = "";
    data.forEach(d => {
        const due = d.total - d.paid;
        const status = due === 0 ? 
            `<span class="badge bg-success">Paid</span>` :
            `<span class="badge bg-danger">Due</span>`;

        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${d.patientId}</td>
            <td>${d.name}</td>
            <td>${d.billNo}</td>
            <td>${d.total}</td>
            <td>${d.paid}</td>
            <td><strong>${due}</strong></td>
            <td>${d.lastPaid}</td>
            <td>${status}</td>
        `;
        tbody.appendChild(tr);
    });
}

renderTable(duesData);

// SEARCH FILTER
searchInput.addEventListener("keyup", () => {
    const value = searchInput.value.toLowerCase();
    const filtered = duesData.filter(d =>
        d.name.toLowerCase().includes(value) ||
        d.patientId.toLowerCase().includes(value)
    );
    renderTable(filtered);
});
</script>

</body>
</html>
